[debug] [2026-02-16T07:08:28.877Z] ----------------------------------------------------------------------
[debug] [2026-02-16T07:08:28.879Z] Command:       C:\Users\hector\node_modules\node\bin\node.exe C:\Users\hector\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js emulators:start --only functions
[debug] [2026-02-16T07:08:28.879Z] CLI Version:   15.5.1
[debug] [2026-02-16T07:08:28.880Z] Platform:      win32
[debug] [2026-02-16T07:08:28.880Z] Node Version:  v22.6.0
[debug] [2026-02-16T07:08:28.880Z] Time:          Mon Feb 16 2026 02:08:28 GMT-0500 (hora de Ecuador)
[debug] [2026-02-16T07:08:28.880Z] ----------------------------------------------------------------------
[debug] 
[debug] [2026-02-16T07:08:32.456Z] Object "" in "firebase.json" has unknown property: {"additionalProperty":"projects"}
[debug] [2026-02-16T07:08:32.465Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2026-02-16T07:08:32.465Z] > authorizing via signed-in user (hectorcobea03@gmail.com)
[info] i  emulators: Starting emulators: functions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions"}}
[debug] [2026-02-16T07:08:32.476Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2026-02-16T07:08:32.476Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2026-02-16T07:08:32.483Z] Write emulator hub locator at C:\Users\hector\AppData\Local\Temp\hub-cielodb-78dae.json
[debug] [2026-02-16T07:08:32.504Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2026-02-16T07:08:32.504Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2026-02-16T07:08:32.504Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2026-02-16T07:08:32.504Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mapphosting, auth, firestore, database, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2026-02-16T07:08:32.540Z] defaultcredentials: writing to file C:\Users\hector\AppData\Roaming\firebase\hectorcobea03_gmail_com_application_default_credentials.json
[debug] [2026-02-16T07:08:32.542Z] Setting GAC to C:\Users\hector\AppData\Roaming\firebase\hectorcobea03_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\hector\\AppData\\Roaming\\firebase\\hectorcobea03_gmail_com_application_default_credentials.json"}}
[debug] [2026-02-16T07:08:32.544Z] Checked if tokens are valid: true, expires at: 1771227668631
[debug] [2026-02-16T07:08:32.544Z] Checked if tokens are valid: true, expires at: 1771227668631
[debug] [2026-02-16T07:08:32.546Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/cielodb-78dae/adminSdkConfig [none]
[debug] [2026-02-16T07:08:33.095Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/cielodb-78dae/adminSdkConfig 200
[debug] [2026-02-16T07:08:33.095Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/cielodb-78dae/adminSdkConfig {"projectId":"cielodb-78dae","storageBucket":"cielodb-78dae.firebasestorage.app"}
[info] i  functions: Watching "C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\" for Cloud Functions..."}}
[debug] [2026-02-16T07:08:33.137Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-16T07:08:34.298Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-16T07:08:34.298Z] Building nodejs source
[debug] [2026-02-16T07:08:34.299Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-16T07:08:34.302Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-16T07:08:34.308Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8317

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-16T07:08:34.825Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-16T07:08:39.861Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌───────────┬────────────────┬─────────────────────────────────┐
│ Emulator  │ Host:Port      │ View in Emulator UI             │
├───────────┼────────────────┼─────────────────────────────────┤
│ Functions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
└───────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2026-02-17T16:22:41.885Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:22:42.976Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:22:45.603Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:22:45.604Z] Building nodejs source
[debug] [2026-02-17T16:22:45.606Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:22:45.615Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:22:45.858Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8572

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:22:55.022Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:22:55.403Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:22:56.417Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:22:57.602Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:22:57.602Z] Building nodejs source
[debug] [2026-02-17T16:22:57.602Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:22:57.603Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:22:57.608Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8798

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:22:58.117Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:24:48.101Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:24:49.117Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:24:50.968Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:24:50.969Z] Building nodejs source
[debug] [2026-02-17T16:24:50.969Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:24:50.970Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:24:50.980Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8918

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:24:51.815Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:24:58.035Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:24:59.044Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:25:00.126Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:25:00.126Z] Building nodejs source
[debug] [2026-02-17T16:25:00.126Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:25:00.127Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:25:00.132Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8704

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:25:00.602Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:26:27.265Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:26:28.280Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:26:29.580Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:26:29.581Z] Building nodejs source
[debug] [2026-02-17T16:26:29.581Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:26:29.582Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:26:29.591Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8261

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:26:30.245Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:26:31.042Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:26:32.047Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:26:33.261Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:26:33.262Z] Building nodejs source
[debug] [2026-02-17T16:26:33.262Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:26:33.263Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:26:33.271Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8856

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:26:34.050Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:26:54.653Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:26:55.663Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:26:57.645Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:26:57.645Z] Building nodejs source
[debug] [2026-02-17T16:26:57.646Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:26:57.646Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:26:57.653Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8683

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:26:58.342Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:27:26.283Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:27:27.296Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:27:29.001Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:27:29.001Z] Building nodejs source
[debug] [2026-02-17T16:27:29.002Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:27:29.003Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:27:29.011Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8824

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:27:29.665Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:29:45.928Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:29:46.936Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:29:48.346Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:29:48.347Z] Building nodejs source
[debug] [2026-02-17T16:29:48.347Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:29:48.349Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:29:48.358Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8041

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:29:49.310Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:29:59.657Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:30:00.666Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:30:01.795Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:30:01.795Z] Building nodejs source
[debug] [2026-02-17T16:30:01.795Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:30:01.796Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:30:01.805Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8039

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:30:02.541Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:31:32.220Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:31:33.235Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:31:34.740Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:31:34.740Z] Building nodejs source
[debug] [2026-02-17T16:31:34.740Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:31:34.741Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:31:34.749Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8659

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:31:35.573Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:31:53.068Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:31:54.071Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:31:55.324Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:31:55.324Z] Building nodejs source
[debug] [2026-02-17T16:31:55.324Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:31:55.325Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:31:55.336Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8778

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:31:55.884Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:33:47.130Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:33:48.137Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:33:49.610Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:33:49.610Z] Building nodejs source
[debug] [2026-02-17T16:33:49.610Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:33:49.611Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:33:49.618Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8400

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:33:50.377Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:34:54.247Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:34:55.254Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:34:57.008Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:34:57.009Z] Building nodejs source
[debug] [2026-02-17T16:34:57.009Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:34:57.010Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:34:57.017Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8190

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:34:57.713Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:35:30.102Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:35:31.105Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:35:32.409Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:35:32.410Z] Building nodejs source
[debug] [2026-02-17T16:35:32.410Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:35:32.411Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:35:32.416Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8120

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:35:32.990Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:35:42.012Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:35:43.013Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:35:44.840Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:35:44.841Z] Building nodejs source
[debug] [2026-02-17T16:35:44.841Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:35:44.844Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:35:44.859Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8044

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:35:45.636Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:35:46.444Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:35:47.454Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:35:49.159Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:35:49.159Z] Building nodejs source
[debug] [2026-02-17T16:35:49.160Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:35:49.163Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:35:49.173Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[debug] [2026-02-17T16:35:49.200Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8096

[debug] [2026-02-17T16:35:49.791Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:35:49.932Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:35:50.795Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:35:52.317Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:35:52.317Z] Building nodejs source
[debug] [2026-02-17T16:35:52.317Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:35:52.319Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:35:52.327Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8297

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:35:53.049Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:44:19.096Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:44:20.098Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:44:22.259Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:44:22.259Z] Building nodejs source
[debug] [2026-02-17T16:44:22.259Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:44:22.261Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:44:22.268Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8231

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:44:23.065Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:45:51.488Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:45:52.501Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:45:53.930Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:45:53.931Z] Building nodejs source
[debug] [2026-02-17T16:45:53.931Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:45:53.933Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:45:53.941Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8683

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:45:54.637Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:46:09.869Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:46:10.882Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:46:12.225Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:46:12.225Z] Building nodejs source
[debug] [2026-02-17T16:46:12.225Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:46:12.226Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:46:12.231Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8900

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:46:12.830Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:46:16.441Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:46:17.451Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:46:19.028Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:46:19.029Z] Building nodejs source
[debug] [2026-02-17T16:46:19.029Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:46:19.030Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:46:19.041Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] Serving at port 8623

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:46:19.736Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:46:23.847Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:46:24.849Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:46:26.420Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:46:26.420Z] Building nodejs source
[debug] [2026-02-17T16:46:26.420Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:46:26.421Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:46:26.429Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[debug] [2026-02-17T16:46:26.851Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8657

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:46:27.195Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:46:27.866Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:46:29.131Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:46:29.131Z] Building nodejs source
[debug] [2026-02-17T16:46:29.131Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:46:29.133Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:46:29.140Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8996

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:46:29.691Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:46:31.011Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:46:32.018Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:46:33.640Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:46:33.641Z] Building nodejs source
[debug] [2026-02-17T16:46:33.641Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:46:33.642Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:46:33.648Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] Serving at port 8108

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:46:34.298Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:47:05.323Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:47:06.332Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:47:07.955Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:47:07.955Z] Building nodejs source
[debug] [2026-02-17T16:47:07.955Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:47:07.956Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:47:07.964Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[debug] [2026-02-17T16:47:07.972Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8057

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:47:08.560Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:47:08.977Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:47:10.070Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:47:10.071Z] Building nodejs source
[debug] [2026-02-17T16:47:10.071Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:47:10.071Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:47:10.076Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8318

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:47:10.575Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:47:33.730Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:47:34.734Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:47:36.319Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:47:36.319Z] Building nodejs source
[debug] [2026-02-17T16:47:36.319Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:47:36.321Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:47:36.330Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[debug] [2026-02-17T16:47:36.338Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8335

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:47:36.977Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:47:37.349Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:47:38.957Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:47:38.957Z] Building nodejs source
[debug] [2026-02-17T16:47:38.957Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:47:38.958Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:47:38.963Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8225

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:47:39.447Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:47:44.463Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:47:45.467Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:47:46.814Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:47:46.814Z] Building nodejs source
[debug] [2026-02-17T16:47:46.814Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:47:46.816Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:47:46.826Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8571

[debug] [2026-02-17T16:47:47.304Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:47:47.515Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:47:48.316Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:47:49.751Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:47:49.752Z] Building nodejs source
[debug] [2026-02-17T16:47:49.752Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:47:49.755Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:47:49.766Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8650

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:47:50.414Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:47:51.994Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:47:53.002Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:47:54.526Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:47:54.526Z] Building nodejs source
[debug] [2026-02-17T16:47:54.526Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:47:54.527Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:47:54.536Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8215

[debug] [2026-02-17T16:47:55.153Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:47:55.196Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:47:56.167Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:47:57.506Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:47:57.506Z] Building nodejs source
[debug] [2026-02-17T16:47:57.506Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:47:57.507Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:47:57.513Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8532

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:47:58.072Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:48:02.502Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:48:03.505Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:04.977Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:04.977Z] Building nodejs source
[debug] [2026-02-17T16:48:04.977Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:04.979Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:04.986Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[debug] [2026-02-17T16:48:04.994Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8177

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:05.637Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:48:06.002Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:07.431Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:07.431Z] Building nodejs source
[debug] [2026-02-17T16:48:07.431Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:07.432Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:07.440Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[debug] [2026-02-17T16:48:07.447Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8452

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:08.092Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:48:08.452Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:09.686Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:09.686Z] Building nodejs source
[debug] [2026-02-17T16:48:09.686Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:09.687Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:09.693Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8827

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:10.386Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:48:11.236Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:48:12.251Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:13.579Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:13.579Z] Building nodejs source
[debug] [2026-02-17T16:48:13.579Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:13.581Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:13.593Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] Serving at port 8616

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:14.308Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:48:15.111Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:48:16.118Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:17.456Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:17.457Z] Building nodejs source
[debug] [2026-02-17T16:48:17.457Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:17.458Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:17.462Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8088

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:18.167Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:48:18.236Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:48:19.242Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:20.539Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:20.539Z] Building nodejs source
[debug] [2026-02-17T16:48:20.539Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:20.541Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:20.549Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:48:20.557Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8978

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:21.215Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:48:21.419Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:48:22.429Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:23.832Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:23.832Z] Building nodejs source
[debug] [2026-02-17T16:48:23.832Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:23.835Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:23.843Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:48:23.857Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8156

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:24.476Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:48:24.867Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:26.289Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:26.290Z] Building nodejs source
[debug] [2026-02-17T16:48:26.290Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:26.291Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:26.300Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] Serving at port 8894

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:26.977Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:48:30.941Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:48:31.942Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:33.141Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:33.141Z] Building nodejs source
[debug] [2026-02-17T16:48:33.141Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:33.143Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:33.148Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] Serving at port 8170

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:33.748Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:48:35.430Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:48:36.434Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:37.936Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:37.937Z] Building nodejs source
[debug] [2026-02-17T16:48:37.937Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:37.938Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:37.948Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[debug] [2026-02-17T16:48:37.956Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8268

[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:38.811Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:48:38.968Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:40.529Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:40.529Z] Building nodejs source
[debug] [2026-02-17T16:48:40.529Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:40.530Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:40.538Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8070

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:41.445Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T16:48:42.058Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:48:43.070Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:44.420Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:44.420Z] Building nodejs source
[debug] [2026-02-17T16:48:44.421Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:44.423Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:44.432Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] Serving at port 8474

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:45.179Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:48:48.012Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:48:49.019Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:48:50.220Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:48:50.220Z] Building nodejs source
[debug] [2026-02-17T16:48:50.220Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:48:50.226Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:48:50.242Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[info] Serving at port 8522

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:48:50.917Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:49:31.972Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:49:32.984Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:49:34.875Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:49:34.875Z] Building nodejs source
[debug] [2026-02-17T16:49:34.875Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:49:34.876Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:49:34.885Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8215

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:49:35.614Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:50:54.579Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:50:55.589Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:50:57.165Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:50:57.165Z] Building nodejs source
[debug] [2026-02-17T16:50:57.165Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:50:57.166Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:50:57.176Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8203

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:50:57.880Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:53:25.369Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:53:26.372Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:53:28.181Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:53:28.181Z] Building nodejs source
[debug] [2026-02-17T16:53:28.182Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:53:28.183Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:53:28.197Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8176

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:53:29.002Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:54:02.137Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:54:03.150Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:54:04.532Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:54:04.532Z] Building nodejs source
[debug] [2026-02-17T16:54:04.532Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:54:04.533Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:54:04.542Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8232

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:54:05.165Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:54:17.925Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:54:18.941Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:54:20.176Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:54:20.177Z] Building nodejs source
[debug] [2026-02-17T16:54:20.177Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:54:20.177Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:54:20.182Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8611

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:54:20.939Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:56:23.349Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:56:24.350Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:56:25.837Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:56:25.837Z] Building nodejs source
[debug] [2026-02-17T16:56:25.837Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:56:25.840Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:56:25.848Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8314

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:56:26.730Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:56:46.865Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:56:47.870Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:56:49.159Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:56:49.160Z] Building nodejs source
[debug] [2026-02-17T16:56:49.160Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:56:49.160Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:56:49.166Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8499

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:56:49.625Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:59:22.415Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:59:23.420Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:59:25.182Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:59:25.182Z] Building nodejs source
[debug] [2026-02-17T16:59:25.182Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:59:25.184Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:59:25.194Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8341

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:59:26.073Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T16:59:37.846Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T16:59:38.852Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T16:59:40.244Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T16:59:40.245Z] Building nodejs source
[debug] [2026-02-17T16:59:40.245Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T16:59:40.246Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T16:59:40.255Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8396

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T16:59:40.791Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T17:01:29.527Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T17:01:30.535Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:01:32.094Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:01:32.094Z] Building nodejs source
[debug] [2026-02-17T17:01:32.094Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:01:32.095Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:01:32.104Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8228

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:01:32.876Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T17:01:54.161Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T17:01:55.173Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:01:56.577Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:01:56.577Z] Building nodejs source
[debug] [2026-02-17T17:01:56.577Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:01:56.578Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:01:56.583Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8789

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:01:57.063Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T17:04:02.568Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T17:04:03.645Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:04:05.362Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:04:05.362Z] Building nodejs source
[debug] [2026-02-17T17:04:05.362Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:04:05.364Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:04:05.379Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8459

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:04:06.285Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T17:04:13.777Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T17:04:14.780Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:04:16.266Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:04:16.267Z] Building nodejs source
[debug] [2026-02-17T17:04:16.267Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:04:16.269Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:04:16.274Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8092

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:04:16.868Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T17:05:13.954Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T17:05:14.991Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:05:16.752Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:05:16.753Z] Building nodejs source
[debug] [2026-02-17T17:05:16.753Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:05:16.754Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:05:16.767Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8439

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:05:17.567Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T17:05:37.041Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T17:05:38.045Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:05:39.290Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:05:39.290Z] Building nodejs source
[debug] [2026-02-17T17:05:39.290Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:05:39.292Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:05:39.300Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8380

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:05:39.885Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T17:09:19.796Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T17:09:20.809Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:09:22.650Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:09:22.650Z] Building nodejs source
[debug] [2026-02-17T17:09:22.651Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:09:22.651Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:09:22.658Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[debug] [2026-02-17T17:09:22.666Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8166

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:09:23.302Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T17:09:23.680Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:09:25.022Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:09:25.022Z] Building nodejs source
[debug] [2026-02-17T17:09:25.022Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:09:25.024Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:09:25.030Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[debug] [2026-02-17T17:09:25.036Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[info] Serving at port 8001

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:09:25.625Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[debug] [2026-02-17T17:09:26.039Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:09:27.490Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:09:27.491Z] Building nodejs source
[debug] [2026-02-17T17:09:27.491Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:09:27.492Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:09:27.498Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8458

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:09:28.071Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T17:11:31.832Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T17:11:32.839Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:11:34.228Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:11:34.229Z] Building nodejs source
[debug] [2026-02-17T17:11:34.229Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:11:34.230Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:11:34.238Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8224

[error] ReferenceError: Cannot access 'functions' before initialization
    at Object.<anonymous> (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\lib\index.js:10:44)
    at Module._compile (node:internal/modules/cjs/loader:1546:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1691:10)
    at Module.load (node:internal/modules/cjs/loader:1317:32)
    at Module._load (node:internal/modules/cjs/loader:1127:12)
    at TracingChannel.traceSync (node:diagnostics_channel:315:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:217:24)
    at Module.require (node:internal/modules/cjs/loader:1339:12)
    at require (node:internal/modules/helpers:125:16)
    at loadModule (C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\firebase-functions\lib\runtime\loader.js:40:16)

[debug] [2026-02-17T17:11:35.035Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: Cannot access 'functions' before initialization
[error] !!  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2026-02-17T17:11:47.743Z] File C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\src\index.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File C:\\Users\\hector\\Documents\\desarrolloWeb\\cielo-promo\\functions\\src\\index.ts changed, reloading triggers"}}
[debug] [2026-02-17T17:11:48.756Z] Validating nodejs source
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] !  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2026-02-17T17:11:50.178Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Cielo Promo",
  "scripts": {
    "build": "tsc",
    "watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/vision": "^5.3.4",
    "firebase-admin": "^12.0.0",
    "firebase-functions": "^5.0.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
[debug] [2026-02-17T17:11:50.178Z] Building nodejs source
[debug] [2026-02-17T17:11:50.178Z] Failed to find version of module node: reached end of search path C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules
[warn] !  functions: Your requested "node" version "20" doesn't match your global version "22". Using node@22 from host. 
[debug] [2026-02-17T17:11:50.179Z] Could not find functions.yaml. Must use http discovery
[debug] [2026-02-17T17:11:50.184Z] Found firebase-functions binary at 'C:\Users\hector\Documents\desarrolloWeb\cielo-promo\functions\node_modules\.bin\firebase-functions'
